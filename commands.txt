## Deploying to Cloud Run on GCP 🍀
####################################

## 🌺 🌺 🌺 Build container image for cloud run
gcloud builds submit --tag gcr.io/paymentplatform-33/anchor

OR (BEST PRACTICE and faster cold starts ...)
##  🌺 🌺 🌺 use Jib to create container image - see plugin in pom.xml (name of image defined here)
./mvnw compile jib:build


#  🌼  🌼  🌼 Deploy container
gcloud run deploy --image gcr.io/paymentplatform-33/anchor --platform managed


# KILL PROCESS on PORT
sudo lsof -i :8084
sudo kill -9 <PID>

gcloud kms keyrings create "aubsKeyRing"  --location "global"

gcloud kms keys create "stellarKey"  --location "global"  --keyring "aubsKeyRing"  --purpose "encryption"


//PROMETHEUS Monitor
docker run -d --name=prometheus -p 9090:9090 -v /Users/aubs/WORK/STELLAR-ANCHOR/stellar_anchor_backend/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus --config.file=/etc/prometheus/prometheus.yml
docker run -d --name=grafana -p 3000:3000 grafana/grafana

